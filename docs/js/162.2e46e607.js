"use strict";(self["webpackChunkchallenge"]=self["webpackChunkchallenge"]||[]).push([[162],{6162:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ee});var n=s(3673),l=s(2323);const o=e=>((0,n.dD)("data-v-f48c32aa"),e=e(),(0,n.Cn)(),e),a={class:"container q-pt-lg q-pb-xs"},i=o((()=>(0,n._)("div",{class:"title text-dark q-pb-sm"},"Interactive Comment",-1))),m={class:"container q-pt-lg q-pb-lg"},r={class:"new-message q-pa-lg q-mb-sm"},c=["src"];function d(e,t,s,o,d,u){const p=(0,n.up)("q-separator"),h=(0,n.up)("q-toolbar-title"),g=(0,n.up)("q-item-section"),w=(0,n.up)("q-item"),f=(0,n.up)("q-list"),b=(0,n.up)("q-menu"),v=(0,n.up)("q-btn"),C=(0,n.up)("q-toolbar"),q=(0,n.up)("interactive-comment"),S=(0,n.up)("q-avatar"),y=(0,n.up)("q-input"),_=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(_,{class:"",style:{"background-color":"hsl(223, 19%, 93%)"}},{default:(0,n.w5)((()=>[(0,n._)("div",a,[i,(0,n.Wm)(p),(0,n.Wm)(C,{class:"q-pt-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.user.username),1)])),_:1}),(0,n.Wm)(v,{color:"primary",label:"Choose user"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{"transition-show":"jump-down","transition-hide":"jump-up","auto-close":""},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:{"min-width":"100px"},separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.users,(t=>((0,n.wg)(),(0,n.j4)(w,{clickable:"",key:t.username,onClick:s=>e.onChangeUser(t.username)},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.username),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})]),(0,n._)("div",m,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.comments,(t=>((0,n.wg)(),(0,n.j4)(q,{key:t.id,comment:JSON.parse(JSON.stringify(t)),onOnSetScore:e.onChangeScore,level:0,idparent:t.id,onOnSaveReplies:e.saveReplies,onOnGetParent:e.getParent},null,8,["comment","onOnSetScore","idparent","onOnSaveReplies","onOnGetParent"])))),128)),(0,n._)("div",r,[(0,n.Wm)(y,{outlined:"",modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=t=>e.message=t),dense:e.dense,autogrow:"",placeholder:"Add a comment..."},{before:(0,n.w5)((()=>[(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[(0,n._)("img",{src:e.user.image.png},null,8,c)])),_:1})])),after:(0,n.w5)((()=>[(0,n.Wm)(v,{dense:"",flat:"",label:"Send","no-caps":"",class:"btn-send",onClick:t[0]||(t[0]=t=>e.onSendMessage())})])),_:1},8,["modelValue","dense"])])])])),_:1})}const u={class:"content-box"},p={class:"btn-actions"},h={class:"wrap-btn"},g={class:"content-message"},w=["src"],f={class:"name-section"},b={class:"q-pl-lg time-section"},v={class:"q-pt-xs content-text"},C={key:0},q={key:1,class:"new-message q-pa-lg q-mb-sm"},S=["src"],y={key:2,class:"new-message q-pa-lg q-mb-sm"},_=["src"],k=(0,n._)("div",{class:"text-h6 text-title"},"Delete comment",-1),W=(0,n.Uk)(" Are you sure you want to delete this comment? This will remove the comment and can't be undone ");function Z(e,t,s,o,a,i){const m=(0,n.up)("q-btn"),r=(0,n.up)("q-avatar"),c=(0,n.up)("q-toolbar-title"),d=(0,n.up)("q-space"),Z=(0,n.up)("q-toolbar"),D=(0,n.up)("q-card"),Q=(0,n.up)("interactive-comment",!0),O=(0,n.up)("q-input"),R=(0,n.up)("q-card-section"),x=(0,n.up)("q-card-actions"),M=(0,n.up)("q-dialog"),j=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)("div",{style:(0,l.j5)(i.commentMargin)},[(0,n.Wm)(D,{flat:"",class:"my-card q-mb-sm"},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n._)("div",p,[(0,n._)("div",h,[(0,n.Wm)(m,{label:"-",flat:"",dense:"",onClick:t[0]||(t[0]=e=>a.score--)}),(0,n.Wm)(m,{label:a.score>=0?a.score:0,flat:"",dense:""},null,8,["label"]),(0,n.Wm)(m,{label:"+",flat:"",dense:"",onClick:t[1]||(t[1]=e=>a.score++)})])]),(0,n._)("div",g,[(0,n.Wm)(Z,{class:"bg-transparence"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n._)("img",{src:s.comment.user.image.png},null,8,w)])),_:1}),(0,n.Wm)(c,{class:""},{default:(0,n.w5)((()=>[(0,n._)("span",f,(0,l.zw)(s.comment.user.username),1),(0,n._)("span",b,(0,l.zw)(s.comment.createdAt),1)])),_:1}),(0,n.Wm)(d),e.user.username!=s.comment.user.username?((0,n.wg)(),(0,n.j4)(m,{key:0,flat:"",dense:"",icon:"reply",label:"Reply","no-caps":"",class:"btn-reply",onClick:t[2]||(t[2]=e=>i.showReply(s.comment.user))})):(0,n.kq)("",!0),e.user.username==s.comment.user.username?((0,n.wg)(),(0,n.j4)(m,{key:1,flat:"",dense:"",icon:"delete",label:"Delete","no-caps":"",class:"btn-delete",onClick:t[3]||(t[3]=e=>i.showDelete(s.comment))})):(0,n.kq)("",!0),e.user.username==s.comment.user.username?((0,n.wg)(),(0,n.j4)(m,{key:2,flat:"",dense:"",icon:"edit",label:"Edit","no-caps":"",class:"btn-reply",onClick:t[4]||(t[4]=e=>i.showEdit(s.comment))})):(0,n.kq)("",!0)])),_:1}),(0,n._)("div",v,(0,l.zw)(s.comment.content),1)])])])),_:1}),i.hasReplies?((0,n.wg)(),(0,n.iD)("div",C,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.comment.replies,(e=>((0,n.wg)(),(0,n.j4)(Q,{key:e.id,idparent:e.id,comment:e,onOnSetScore:i.onChangeScore,spacing:s.spacing+40,level:s.level+1,onOnSaveReplies:i.saveReplies,onOnGetParent:i.getParent},null,8,["idparent","comment","onOnSetScore","spacing","level","onOnSaveReplies","onOnGetParent"])))),128))])):(0,n.kq)("",!0),a.showForm?((0,n.wg)(),(0,n.iD)("div",q,[(0,n.Wm)(O,{ref:"messagebox",outlined:"",modelValue:a.message,"onUpdate:modelValue":t[6]||(t[6]=e=>a.message=e),dense:a.dense,autogrow:""},{before:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n._)("img",{src:e.user.image.png},null,8,S)])),_:1})])),after:(0,n.w5)((()=>[(0,n.Wm)(m,{dense:"",flat:"",label:"Send","no-caps":"",class:"btn-send",onClick:t[5]||(t[5]=e=>i.onSendMessageRepy())})])),_:1},8,["modelValue","dense"])])):(0,n.kq)("",!0),a.showFormEdit?((0,n.wg)(),(0,n.iD)("div",y,[(0,n.Wm)(O,{ref:"messagebox",outlined:"",modelValue:a.selectComment.content,"onUpdate:modelValue":t[8]||(t[8]=e=>a.selectComment.content=e),dense:a.dense,autogrow:""},{before:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n._)("img",{src:a.selectComment.user.image.png},null,8,_)])),_:1})])),after:(0,n.w5)((()=>[(0,n.Wm)(m,{dense:"",flat:"",label:"Update","no-caps":"",class:"btn-send",onClick:t[7]||(t[7]=e=>i.onSendMessageUpdate())})])),_:1},8,["modelValue","dense"])])):(0,n.kq)("",!0),(0,n.Wm)(M,{modelValue:a.showConfirm,"onUpdate:modelValue":t[10]||(t[10]=e=>a.showConfirm=e),style:{width:"400px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{style:{width:"400px"},class:"q-pb-md q-pt-sm card-dialog"},{default:(0,n.w5)((()=>[(0,n.Wm)(R,null,{default:(0,n.w5)((()=>[k])),_:1}),(0,n.Wm)(R,{class:"q-pt-none text-content"},{default:(0,n.w5)((()=>[W])),_:1}),(0,n.Wm)(x,{align:"center"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(m,{label:"No Cancel",class:"btn-cancel text-white"},null,512),[[j]]),(0,n.wy)((0,n.Wm)(m,{label:"Yes, delete",class:"btn-valid text-white",onClick:t[9]||(t[9]=e=>i.onDelete())},null,512),[[j]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],4)}var D=s(741);const Q={props:{comment:{type:Object,required:!0},spacing:{type:Number,default:0},level:{type:Number,default:0},idparent:{type:Number,required:!0}},data(){return{score:0,message:null,dense:!1,showForm:!1,showFormEdit:!1,replies:[],userSent:null,showConfirm:!1,selectComment:null}},watch:{score:function(e){e<0&&(this.score=0);let t={id:this.comment.id,score:this.score};this.$emit("onSetScore",t)}},computed:{...(0,D.rn)("interactive",["user","commentID"]),hasReplies(){const{replies:e}=this.comment;return this.replies=e,e&&e.length>0},commentMargin(){return{"margin-left":`${this.spacing}px`}}},methods:{...(0,D.nv)("interactive",["addCommentID","deleteComment","updateComment"]),getParent(e){"object"===typeof e?this.addCommentID(e.id):this.addCommentID(e),this.$emit("onGetParent",this.idparent)},onDelete(){this.deleteComment(this.idparent)},showDelete(e){this.selectComment=e,this.showConfirm=!0,this.$emit("onGetParent",e.id)},showEdit(e){this.selectComment=JSON.parse(JSON.stringify(e)),this.showFormEdit=!0,this.$emit("onGetParent",e)},saveReplies(){let e={id:this.idparent,replies:this.replies};this.$emit("onSaveReplies",e)},showReply(e){this.userSent=e,this.showForm=!this.showForm,this.message="@"+e.username},onChangeScore(e){console.log(e)},onSendMessageUpdate(){let e={content:this.selectComment.content,replyingTo:this.selectComment.replyingTo,id:this.selectComment.id,createdAt:"1 min ago",score:0,user:this.user,replies:this.selectComment.replies};this.selectComment,this.updateComment(e),this.showFormEdit=!1},onSendMessageRepy(){let e={content:this.message,replyingTo:this.userSent.name,id:Math.floor(1e3*Math.random()),createdAt:"1 min ago",score:0,user:this.user,replies:[]};this.replies.push(e),this.message="@"+this.userSent.username;let t={id:this.idparent,replies:this.replies};this.$emit("onSaveReplies",t),this.showForm=!1}},beforeMount(){this.score=this.comment.score,this.showForm=!1,console.log(this.level)}};var O=s(4260),R=s(151),x=s(6114),M=s(9570),j=s(5096),I=s(3747),P=s(2025),U=s(5415),V=s(6778),A=s(5589),F=s(9367),N=s(677),T=s(7518),E=s.n(T);const G=(0,O.Z)(Q,[["render",Z]]),$=G;E()(Q,"components",{QCard:R.Z,QBtn:x.Z,QToolbar:M.Z,QAvatar:j.Z,QToolbarTitle:I.Z,QSpace:P.Z,QInput:U.Z,QDialog:V.Z,QCardSection:A.Z,QCardActions:F.Z}),E()(Q,"directives",{ClosePopup:N.Z});const J=(0,n.aZ)({components:{interactiveComment:$},name:"PageIndex",data(){return{message:null,dense:!1,allComments:[]}},watch:{commnents:function(e){console.log(e),this.allComments=e}},computed:{...(0,D.rn)("interactive",["comments","user","users"])},methods:{...(0,D.nv)("interactive",["sendMessage","changeUser","saveAllReplies","addCommentID"]),getParent(e){"object"===typeof e?this.addCommentID(e.id):this.addCommentID(e)},saveReplies(e){let t=[];console.log(e),Object.keys(e.replies).forEach((s=>{t.push(e.replies[s])}));let s={id:e.id,replies:t};this.saveAllReplies(s),console.log(t)},onChangeScore(e){console.log(e)},onSendMessage(){let e={content:this.message,level:0};this.sendMessage(e),this.message=null},onChangeUser(e){this.changeUser(e)}},beforeMount(){this.allComments=JSON.parse(JSON.stringify(this.comments))}});var z=s(4379),Y=s(5869),H=s(6335),K=s(7011),B=s(3414),L=s(2035);const X=(0,O.Z)(J,[["render",d],["__scopeId","data-v-f48c32aa"]]),ee=X;E()(J,"components",{QPage:z.Z,QSeparator:Y.Z,QToolbar:M.Z,QToolbarTitle:I.Z,QBtn:x.Z,QMenu:H.Z,QList:K.Z,QItem:B.Z,QItemSection:L.Z,QInput:U.Z,QAvatar:j.Z})}}]);